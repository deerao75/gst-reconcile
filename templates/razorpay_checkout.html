<!DOCTYPE html>
<html>
<head>
    <title>Processing Payment...</title>
</head>
<body>
    <center>
        <h3>Please wait, opening secure payment gateway...</h3>
    </center>

    <form action="{{ url_for('payments.payment_verification') }}" method="POST" id="razorpay-form">
        <script
            src="https://checkout.razorpay.com/v1/checkout.js"
            data-key="{{ key_id }}"
            data-amount="{{ order.amount }}"
            data-currency="INR"
            data-order_id="{{ order.id }}"
            data-buttontext="Pay with Razorpay"
            data-name="AcerTax"
            data-description="Subscription Payment"
            data-image="https://yourwebsite.com/logo.png"
            data-prefill.name=""
            data-prefill.email="{{ user_email }}"
            data-prefill.contact="{{ user_contact }}"
            data-theme.color="#F37254"
        ></script>
        <!-- These inputs will be filled by Razorpay on success -->
        <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">
        <input type="hidden" name="razorpay_order_id" id="razorpay_order_id">
        <input type="hidden" name="razorpay_signature" id="razorpay_signature">
    </form>

    <script>
        // Optional: Automatically click the button
        window.onload = function(){
            document.querySelector('.razorpay-payment-button').click();
        };
    </script>
</body>
</html>
